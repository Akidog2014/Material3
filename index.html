<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Materialübersicht per E-Mail</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 0;
            background-color: #f4f4f4;
        }

        h2 {
            text-align: center;
            margin: 20px 0;
        }

        .form-group {
            display: flex;
            flex-direction: column;
            width: 100%;
            margin-bottom: 20px;
        }

        .form-group-flex {
            display: flex;
            align-items: center;
            width: 100%;
            margin-bottom: 10px;
        }

        label {
            font-weight: bold;
            margin-right: 10px;
            min-width: 80px;
            display: inline-block;
        }

        input, select {
            width: 100%;
            padding: 8px;
            margin: 5px 0;
            box-sizing: border-box;
        }

        button {
            background-color: #4CAF50;
            color: white;
            border: none;
            padding: 12px 20px;
            text-align: center;
            display: inline-block;
            font-size: 16px;
            cursor: pointer;
            width: 100%;
            margin-top: 10px;
        }

        button:hover {
            background-color: #45a049;
        }

        /* Optimierungen für mobile Geräte */
        @media (max-width: 600px) {
            .form-group-flex {
                display: flex;
                justify-content: space-between;
                align-items: center;
            }

            .form-group-flex input,
            .form-group-flex select {
                flex-grow: 1;
                width: 70%;  /* Die Eingabefelder nehmen 70% der Breite ein */
            }

            label {
                width: 30%;  /* Die Label nehmen 30% der Breite ein */
            }

            button {
                width: 100%;
            }

            .container {
                padding: 0 15px;
            }
        }

        * {
            box-sizing: border-box;
        }

        html, body {
            height: 100%;
        }

        .container {
            min-height: 100%;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
        }
    </style>
</head>
<body>

<div class="container">
    <h2>Materialtabelle</h2>

    <form id="materialForm">
        <div id="tableBody">
            <!-- Anzahl mit Label und Input nebeneinander -->
            <div class="form-group-flex">
                <label for="anzahl">Anzahl</label>
                <input type="number" name="anzahl[]" required min="1">
            </div>

            <!-- Material -->
            <div class="form-group-flex">
                <label for="material">Material</label>
                <input list="materialListe" name="material[]" required oninput="updateArtikelnummer(this)">
            </div>

            <!-- Bemerkung -->
            <div class="form-group-flex">
                <label for="bemerkung">Bemerkung</label>
                <input type="text" name="bemerkung[]" required>
            </div>

            <!-- Standort -->
            <div class="form-group-flex">
                <label for="standort">Standort</label>
                <select name="standort[]">
                    <option value="HP Emmen">HP Emmen</option>
                    <option value="PP Reussbühl">PP Reussbühl</option>
                    <option value="PP Rothenburg">PP Rothenburg</option>
                </select>
            </div>
        </div>

        <button type="button" onclick="addRow()">Weitere Zeile hinzufügen</button><br><br>
        <button type="button" onclick="submitForm()">Abschicken</button>
    </form>

    <!-- Datalist einmal im HTML definieren -->
    <datalist id="materialListe">
        <option value="Muster Minigrip 50x100mm"></option>
        <option value="Abdeckband Tesa 50mx48mm, silber"></option>
        <option value="Abdeckband Tesa 50mmx50m, gelb"></option>
        <option value="Absperrband, neutral, rot-weiss"></option>
        <option value="Absperrband, Polizei, rot-weiss"></option>
        <option value="Alcomat-Mundstücke LIMP600-250,SD400/600, gelb"></option>
        <option value="Alcomat-Mundstücke BLMP-250, Alco True P, transparent"></option>
        <option value="Einwegmundstück zu Intoxilyzer 9000, transparent/rot"></option>
        <option value="Anhänge-Etiketten mit Bindfaden 35x50mm"></option>
        <option value="Anhänge-Etiketten mit Bindfaden 50x100mm"></option>
    </datalist>

</div>

<script>
// Materialdaten mit Artikelnummern
const materialData = {
    "Muster Minigrip 50x100mm": "1001000",
    "Abdeckband Tesa 50mx48mm, silber": "1002173",
    "Abdeckband Tesa 50mmx50m, gelb": "1000843",
    "Absperrband, neutral, rot-weiss": "1001506",
    "Absperrband, Polizei, rot-weiss": "1001505",
    "Alcomat-Mundstücke LIMP600-250,SD400/600, gelb": "1001459",
    "Alcomat-Mundstücke BLMP-250, Alco True P, transparent": "1003723",
    "Einwegmundstück zu Intoxilyzer 9000, transparent/rot": "1002997",
    "Anhänge-Etiketten mit Bindfaden 35x50mm": "1000733",
    "Anhänge-Etiketten mit Bindfaden 50x100mm": "1000734"
};

// Fügt eine neue Zeile in die Tabelle ein
function addRow() {
    const tableBody = document.getElementById('tableBody');
    const newRow = document.createElement('div');
    newRow.classList.add('form-group');
    newRow.innerHTML = `
        <div class="form-group-flex">
            <label for="anzahl">Anzahl</label>
            <input type="number" name="anzahl[]" required min="1">
        </div>
        <div class="form-group-flex">
            <label for="material">Material</label>
            <input list="materialListe" name="material[]" required oninput="updateArtikelnummer(this)">
        </div>
        <div class="form-group-flex">
            <label for="bemerkung">Bemerkung</label>
            <input type="text" name="bemerkung[]" required>
        </div>
        <div class="form-group-flex">
            <label for="standort">Standort</label>
            <select name="standort[]">
                <option value="HP Emmen">HP Emmen</option>
                <option value="PP Reussbühl">PP Reussbühl</option>
                <option value="PP Rothenburg">PP Rothenburg</option>
            </select>
        </div>
    `;
    tableBody.appendChild(newRow);
}

// Aktualisiert die Artikelnummer basierend auf der Materialauswahl
function updateArtikelnummer(input) {
    const selectedMaterial = input.value;
    const artikelnummer = materialData[selectedMaterial];
    if (artikelnummer) {
        console.log("Artikelnummer für " + selectedMaterial + ": " + artikelnummer);
    }
}

// Öffnet das E-Mail-Programm mit den Artikelinformationen
function submitForm() {
    const form = document.getElementById('materialForm');

    // Aktuelles Datum ermitteln und formatieren
    const currentDate = new Date();
    const formattedDate = currentDate.toLocaleDateString('de-DE');  // Format: "dd.mm.yyyy"

    // Text für die E-Mail (mit aktuellem Datum)
    let emailBody = "Materialbestellung vom " + formattedDate + "\n\n";

    // Füge die Materialinformationen hinzu
    const tableRows = document.querySelectorAll('#tableBody div.form-group');
    let tableContent = "";

    tableRows.forEach(row => {
        const anzahl
